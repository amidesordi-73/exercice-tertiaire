<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Quiz IA & RGPD â€“ Prompts conformes ou non ?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        :root {
            --apf-primary: #2b579a;
            --apf-primary-dark: #1f3f73;
            --apf-bg: #f4f4f9;
            --apf-card-bg: #ffffff;
            --apf-accent: #ffd965;
            --apf-text: #333333;
            --good: #e6f4ea;
            --bad: #fdecea;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: var(--apf-bg);
            color: var(--apf-text);
            line-height: 1.6;
        }

        header {
            background: linear-gradient(90deg, var(--apf-primary-dark), var(--apf-primary));
            color: #ffffff;
            padding: 12px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo-placeholder {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            border: 2px solid #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            text-align: center;
            padding: 4px;
        }

        header h1 {
            margin: 0;
            font-size: 20px;
        }

        header p {
            margin: 4px 0 0;
            font-size: 13px;
            opacity: 0.9;
        }

        .header-right {
            text-align: right;
            font-size: 12px;
            max-width: 260px;
        }

        .top-bar {
            background: #e9edf8;
            padding: 6px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-block;
            border-radius: 999px;
            padding: 6px 14px;
            font-size: 13px;
            border: none;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
        }

        .btn-primary {
            background: var(--apf-primary);
            color: #ffffff;
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333333;
        }

        .btn:hover {
            filter: brightness(0.92);
        }

        main {
            max-width: 960px;
            margin: 20px auto 40px;
            padding: 0 16px;
        }

        .intro-card,
        .quiz-card {
            background: var(--apf-card-bg);
            border-radius: 10px;
            padding: 18px 20px;
            margin-bottom: 18px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 4px solid var(--apf-primary);
        }

        .intro-card h2 {
            margin-top: 0;
            font-size: 20px;
        }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 999px;
            font-size: 11px;
            background: var(--apf-accent);
            color: #000;
            font-weight: bold;
            text-transform: uppercase;
            margin-right: 6px;
        }

        .hint {
            font-size: 14px;
            color: #555;
            margin-top: 6px;
        }

        .question-wrapper {
            background: #f9fafc;
            border-radius: 8px;
            padding: 14px 16px;
            border: 1px solid #dde3f0;
        }

        .question-text {
            font-size: 18px;      /* Texte de question plus grand */
            line-height: 1.5;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .progress {
            font-size: 14px;
            margin-bottom: 8px;
            color: #555;
        }

        .answers {
            font-size: 17px;      /* Texte conforme / non conforme plus grand */
            display: flex;
            gap: 26px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        label { cursor: pointer; }

        .buttons-bar {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .result-zone {
            margin-top: 14px;
            font-size: 16px;
            font-weight: bold;
        }

        .score-highlight {
            font-size: 22px;
            font-weight: bold;
        }

        .result-details {
            font-size: 14px;          /* Explications plus grandes */
            margin-top: 10px;
        }

        .detail-card {
            margin-top: 10px;
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #dde3f0;
            background: #fdfdfd;
        }

        .detail-card.correct {
            background: var(--good);
        }

        .detail-card.incorrect {
            background: var(--bad);
        }

        .detail-question {
            font-weight: bold;
            margin-bottom: 4px;
            font-size: 15px;
        }

        .detail-explanation {
            margin-top: 4px;
            font-size: 14px;      /* Explication plus grande */
        }

        @media (max-width: 700px) {
            header {
                flex-direction: column;
                align-items: flex-start;
            }
            .header-right {
                text-align: left;
                max-width: none;
            }
            .top-bar {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>

<header>
    <div class="header-left">
        <div class="logo-placeholder">
            APF<br>Logo
        </div>
        <div>
            <h1>Quiz IA & RGPD â€“ Prompts conformes ou non ?</h1>
            <p>Avenir Pro Formations â€“ EntraÃ®nement aux bons rÃ©flexes</p>
        </div>
    </div>
    <div class="header-right">
        <strong>Avenir Pro Formations</strong><br>
        10 rue Pierre SÃ©mard â€“ 38600 Fontaine (IsÃ¨re)<br>
        Site : amidesordi.com
    </div>
</header>

<div class="top-bar">
    <a href="index.html" class="btn btn-secondary">âŸµ Retour Ã  lâ€™accueil</a>
    <button class="btn btn-primary" type="button" onclick="initQuiz(); window.scrollTo({top: 0, behavior: 'smooth'});">
        ðŸ”„ Relancer un nouveau test (20 questions)
    </button>
</div>

<main>
    <section class="intro-card">
        <span class="badge">Quiz IA & RGPD</span>
        <h2>ReconnaÃ®tre un prompt conforme ou non</h2>
        <p>
            Vous allez rÃ©pondre Ã  <strong>20 questions</strong>, prÃ©sentÃ©es une par une,
            choisies alÃ©atoirement parmi un ensemble de 40 situations.
        </p>
        <p>
            Pour chaque prompt, indiquez sâ€™il vous semble :
            <strong>Conforme</strong> (respect de la RGPD / IA Act) ou <strong>Non conforme</strong>
            (risques sur les donnÃ©es personnelles, donnÃ©es sensibles, transparence, minimisationâ€¦).
        </p>
        <p class="hint">
            Ã€ la fin, vous verrez votre rÃ©sultat en <strong>pourcentage</strong>, ainsi que le dÃ©tail
            de chaque question avec la rÃ©ponse attendue et une explication. Vous pouvez relancer le test
            autant de fois que vous le souhaitez.
        </p>
    </section>

    <section class="quiz-card">
        <div id="question-zone">
            <!-- Question en cours -->
        </div>

        <div class="buttons-bar" id="nav-buttons">
            <button class="btn btn-primary" type="button" onclick="submitCurrentAnswer();">
                âœ… Valider et continuer
            </button>
        </div>

        <div id="quiz-result" class="result-zone" style="display:none;"></div>
        <div id="quiz-result-details" class="result-details" style="display:none;"></div>

        <div class="buttons-bar" id="retry-bar" style="display:none;">
            <button class="btn btn-secondary" type="button" onclick="initQuiz(); window.scrollTo({top: 0, behavior: 'smooth'});">
                ðŸ”„ Refaire un nouveau test (20 questions)
            </button>
        </div>
    </section>
</main>

<script>
    // 40 questions : { text, isCompliant (bool), explanation }
    const QUESTIONS = [
        {
            text: "Â« Donne-moi le dÃ©tail des arrÃªts maladie de Mme Martin (avec dates, diagnostics et mÃ©decin) pour complÃ©ter son dossier RH. Â»",
            isCompliant: false,
            explanation: "DonnÃ©es de santÃ© trÃ¨s sensibles, identifiantes, sans anonymisation ni base lÃ©gale explicite : non conforme Ã  la RGPD."
        },
        {
            text: "Â« Anonymise ce tableau en remplaÃ§ant les noms et prÃ©noms par des identifiants (Client01, Client02, etc.) avant de lâ€™analyser. Â»",
            isCompliant: true,
            explanation: "On demande dâ€™abord une anonymisation avant traitement par lâ€™IA : on va vers la minimisation et la protection des donnÃ©es."
        },
        {
            text: "Â« RÃ©dige une rÃ©ponse type Ã  un client mÃ©content, sans utiliser de donnÃ©es personnelles, pour un service de formation. Â»",
            isCompliant: true,
            explanation: "Prompt gÃ©nÃ©rique, sans donnÃ©es identifiantes : conforme au principe de minimisation."
        },
        {
            text: "Â« Compare les notes de performance de chaque salariÃ© (nom + prÃ©nom) et propose ceux quâ€™on devrait licencier. Â»",
            isCompliant: false,
            explanation: "Utilisation de donnÃ©es identifiantes et dÃ©cision automatisÃ©e potentiellement discriminatoire : non conforme aux principes RGPD / IA Act."
        },
        {
            text: "Â« Donne-moi un modÃ¨le de politique de confidentialitÃ© pour un site de PME de services, sans insÃ©rer de donnÃ©es rÃ©elles. Â»",
            isCompliant: true,
            explanation: "Demande de modÃ¨le gÃ©nÃ©rique, sans donnÃ©es personnelles : conforme."
        },
        {
            text: "Â« Analyse ces conversations clients et souligne les cas oÃ¹ Mme Dupont a Ã©tÃ© agressive. Voici le dÃ©tail des chats avec son nom complet. Â»",
            isCompliant: false,
            explanation: "Analyse comportementale dâ€™une personne identifiÃ©e, sans anonymisation : risque important pour la vie privÃ©e."
        },
        {
            text: "Â« Propose une checklist RGPD pour un cabinet mÃ©dical, sans utiliser de noms de patients, seulement des exemples gÃ©nÃ©riques. Â»",
            isCompliant: true,
            explanation: "Demande gÃ©nÃ©rique, sans donnÃ©es de patients : conforme."
        },
        {
            text: "Â« Peux-tu corriger ce mail en gardant les informations suivantes anonymisÃ©es ? (les noms ont dÃ©jÃ  Ã©tÃ© remplacÃ©s par X et Y) Â»",
            isCompliant: true,
            explanation: "Les donnÃ©es sont dÃ©jÃ  anonymisÃ©es : on limite les risques."
        },
        {
            text: "Â« Ã€ partir de ces fichiers, dis-moi quelles salariÃ©es enceintes ont eu le plus dâ€™arrÃªts et donne le nom de leur manager. Â»",
            isCompliant: false,
            explanation: "DonnÃ©es de santÃ© et de situation personnelle (grossesse) identifiables : non conforme."
        },
        {
            text: "Â« Donne un exemple de message Ã  envoyer Ã  un client pour lui rappeler une facture en retard, sans nom rÃ©el, juste 'Monsieur X'. Â»",
            isCompliant: true,
            explanation: "Exemple fictif, pas de donnÃ©es rÃ©elles : conforme."
        },
        {
            text: "Â« Donne-moi lâ€™adresse postale complÃ¨te de Mme Durand, cliente de la sociÃ©tÃ©, pour lâ€™ajouter dans mon CRM. Â»",
            isCompliant: false,
            explanation: "On ne doit pas demander Ã  lâ€™IA de fournir des donnÃ©es personnelles dâ€™une personne rÃ©elle : atteinte Ã  la vie privÃ©e."
        },
        {
            text: "Â« Ã€ partir de ces donnÃ©es dÃ©jÃ  anonymisÃ©es, propose des segments de clientÃ¨le pour nos campagnes marketing. Â»",
            isCompliant: true,
            explanation: "Traitement de donnÃ©es anonymisÃ©es pour statistique/marketing : conforme."
        },
        {
            text: "Â« Classe ces CV contenant nom, prÃ©nom, date de naissance et adresse selon le 'meilleur profil' pour le poste. Â»",
            isCompliant: false,
            explanation: "DÃ©cision automatisÃ©e sur des personnes identifiÃ©es, avec donnÃ©es personnelles complÃ¨tes : Ã  fort risque RGPD/IA Act."
        },
        {
            text: "Â« RÃ©dige une fiche de poste type pour un(e) assistant(e) administratif(ve) sans citer de personne rÃ©elle. Â»",
            isCompliant: true,
            explanation: "Aucune donnÃ©e personnelle, simple modÃ¨le de document : conforme."
        },
        {
            text: "Â« Voici un questionnaire de satisfaction sans nom ni e-mail. Peux-tu en faire une synthÃ¨se ? Â»",
            isCompliant: true,
            explanation: "Pas de donnÃ©es identifiantes, anonymisation prÃ©alable : conforme."
        },
        {
            text: "Â« Donne-moi le numÃ©ro de carte bancaire de M. Petit, il a dÃ» Ãªtre utilisÃ© rÃ©cemment pour un achat chez nous. Â»",
            isCompliant: false,
            explanation: "DonnÃ©es bancaires hautement sensibles, recherche par IA impossible et non conforme."
        },
        {
            text: "Â« Propose 5 exemples de messages de relance dâ€™impayÃ©, sans utiliser de noms ou de numÃ©ros de dossier rÃ©els. Â»",
            isCompliant: true,
            explanation: "Exemples gÃ©nÃ©riques non rattachÃ©s Ã  une personne rÃ©elle : conforme."
        },
        {
            text: "Â« Analyse ce fichier contenant nom, prÃ©nom, numÃ©ro de sÃ©curitÃ© sociale pour dÃ©tecter les fraudes. Â»",
            isCompliant: false,
            explanation: "DonnÃ©es trÃ¨s sensibles (NIR) : Ã  traiter dans un cadre trÃ¨s strict, pas Ã  injecter dans une IA gÃ©nÃ©raliste."
        },
        {
            text: "Â« Jâ€™ai remplacÃ© les noms des salariÃ©s par des codes (SAL001, SAL002). Peux-tu analyser les taux dâ€™absentÃ©isme par service ? Â»",
            isCompliant: true,
            explanation: "Approche pseudonymisÃ©e/anonymisÃ©e : rÃ©duit les risques, plus conforme."
        },
        {
            text: "Â« Donne-moi le solde bancaire actuel de Mme Martin chez sa banque. Â»",
            isCompliant: false,
            explanation: "Tentative dâ€™obtenir une donnÃ©e bancaire personnelle : non conforme et impossible Ã  lÃ©gitimer."
        },
        {
            text: "Â« Propose un exemple de procÃ©dure interne pour gÃ©rer les demandes de droit dâ€™accÃ¨s RGPD (sans exemple de vrai dossier). Â»",
            isCompliant: true,
            explanation: "Demande thÃ©orique, pas de donnÃ©es personnelles : conforme."
        },
        {
            text: "Â« Ã€ partir de ces donnÃ©es clients incluant e-mail, tÃ©lÃ©phone et consommation dÃ©taillÃ©e, fais-moi une proposition de segmentation marketing. Â»",
            isCompliant: false,
            explanation: "DonnÃ©es identifiantes complÃ¨tes envoyÃ©es Ã  une IA gÃ©nÃ©raliste : risque fort pour la confidentialitÃ©."
        },
        {
            text: "Â« Propose 10 idÃ©es de questions anonymes Ã  inclure dans une enquÃªte de satisfaction en ligne. Â»",
            isCompliant: true,
            explanation: "Aucune donnÃ©e personnelle en entrÃ©e, juste de la crÃ©ation de contenu : conforme."
        },
        {
            text: "Â« RÃ©Ã©cris ce mail en version plus professionnelle, en laissant les noms dÃ©jÃ  anonymisÃ©s (Client A, Client B). Â»",
            isCompliant: true,
            explanation: "Noms anonymisÃ©s, traitement rÃ©dactionnel : conforme."
        },
        {
            text: "Â« RÃ©sume ce compte rendu de rÃ©union RH, en conservant les noms des salariÃ©s pour archivage. Â»",
            isCompliant: false,
            explanation: "Inutile de garder les noms dans un rÃ©sumÃ© analytique envoyÃ© Ã  une IA : manque de minimisation."
        },
        {
            text: "Â« Donne-moi un exemple de clause RGPD pour un contrat de prestation, sans mentionner dâ€™entreprise rÃ©elle. Â»",
            isCompliant: true,
            explanation: "Contenu gÃ©nÃ©rique, pas de donnÃ©es personnelles : conforme."
        },
        {
            text: "Â« Classe ces salariÃ©s, avec leur nom, selon qui semble le plus fragile psychologiquement, Ã  partir de leurs e-mails. Â»",
            isCompliant: false,
            explanation: "Profilage psychologique sur des personnes identifiÃ©es : pratique trÃ¨s risquÃ©e et non conforme."
        },
        {
            text: "Â« Reformule ce message dâ€™information sur la protection des donnÃ©es Ã  destination des clients (aucune donnÃ©e individuelle en piÃ¨ce jointe). Â»",
            isCompliant: true,
            explanation: "Message dâ€™information gÃ©nÃ©rique, pas de donnÃ©es personnelles : conforme."
        },
        {
            text: "Â« Ajoute dans ce tableau les dates de naissance et les adresses postales manquantes des clients Ã  partir dâ€™internet. Â»",
            isCompliant: false,
            explanation: "Recherche et enrichissement de donnÃ©es personnelles Ã  partir de sources externes sans base lÃ©gale : non conforme."
        },
        {
            text: "Â« Corrige lâ€™orthographe de ce document en remplaÃ§ant tous les noms par 'XXX' avant envoi Ã  lâ€™IA. Â»",
            isCompliant: true,
            explanation: "Les noms sont masquÃ©s avant traitement : minimisation des donnÃ©es."
        },
        {
            text: "Â« Dis-moi quels sont les salariÃ©s qui ont fait lâ€™objet dâ€™un avertissement disciplinaire cette annÃ©e, avec leur nom complet. Â»",
            isCompliant: false,
            explanation: "DonnÃ©es disciplinaires identifiantes, trÃ¨s sensibles : non conforme."
        },
        {
            text: "Â« Propose 5 exemples de mail pour informer les salariÃ©s de lâ€™existence dâ€™un traitement de donnÃ©es RH, sans citer dâ€™exemple rÃ©el. Â»",
            isCompliant: true,
            explanation: "Exemples gÃ©nÃ©riques, aucun cas rÃ©el citÃ© : conforme."
        },
        {
            text: "Â« Voici un tableau de clients avec des numÃ©ros de dossier non identifiants. Classe-les par chiffre dâ€™affaires. Â»",
            isCompliant: true,
            explanation: "NumÃ©ros de dossier non identifiants, pas de donnÃ©es personnelles directes : risque limitÃ©."
        },
        {
            text: "Â« Ã€ partir du nom 'Jean DUPONT', trouve son adresse, ses revenus et ses dettes. Â»",
            isCompliant: false,
            explanation: "Recherche intrusive sur une personne nommÃ©ment dÃ©signÃ©e : non conforme Ã  la protection de la vie privÃ©e."
        },
        {
            text: "Â« Propose un modÃ¨le de registre des traitements RGPD pour une petite entreprise de services. Â»",
            isCompliant: true,
            explanation: "Demande de modÃ¨le, sans cas rÃ©el : conforme."
        },
        {
            text: "Â« Donne la liste des clients qui se sont plaints de harcÃ¨lement au travail, avec leur nom et leur service. Â»",
            isCompliant: false,
            explanation: "DonnÃ©es sensibles (situation de harcÃ¨lement) reliÃ©es Ã  des personnes identifiables : non conforme."
        },
        {
            text: "Â« Voici un tableau dÃ©jÃ  rendu anonyme (aucun nom, aucun e-mail). Propose des statistiques globales sur la satisfaction. Â»",
            isCompliant: true,
            explanation: "DonnÃ©es anonymes + analyse statistique : conforme."
        },
        {
            text: "Â« Ã‰cris un texte expliquant de maniÃ¨re simple ce quâ€™est la minimisation des donnÃ©es, sans donner dâ€™exemple rÃ©el. Â»",
            isCompliant: true,
            explanation: "Contenu pÃ©dagogique sans donnÃ©es personnelles : conforme."
        }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let answers = []; // {question, userAnswerBool, isCorrect}

    function shuffle(array) {
        const arr = array.slice();
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    }

    function initQuiz() {
        const questionZone = document.getElementById("question-zone");
        const resultZone = document.getElementById("quiz-result");
        const resultDetails = document.getElementById("quiz-result-details");
        const retryBar = document.getElementById("retry-bar");
        const navButtons = document.getElementById("nav-buttons");

        currentQuestions = shuffle(QUESTIONS).slice(0, 20);
        currentIndex = 0;
        answers = [];

        resultZone.style.display = "none";
        resultDetails.style.display = "none";
        retryBar.style.display = "none";
        resultZone.innerHTML = "";
        resultDetails.innerHTML = "";

        navButtons.style.display = "flex";
        const btn = navButtons.querySelector("button");
        btn.textContent = "âœ… Valider et continuer";

        showCurrentQuestion();
    }

    function showCurrentQuestion() {
        const questionZone = document.getElementById("question-zone");
        const q = currentQuestions[currentIndex];
        const total = currentQuestions.length;
        const num = currentIndex + 1;

        questionZone.innerHTML = `
            <div class="progress">
                Question ${num} sur ${total}
            </div>
            <div class="question-wrapper">
                <div class="question-text">
                    <strong>Prompt :</strong><br>
                    ${q.text}
                </div>
                <div class="answers">
                    <label>
                        <input type="radio" name="answer" value="true">
                        Conforme
                    </label>
                    <label>
                        <input type="radio" name="answer" value="false">
                        Non conforme
                    </label>
                </div>
            </div>
        `;

        const navButtons = document.getElementById("nav-buttons");
        const btn = navButtons.querySelector("button");
        if (num === total) {
            btn.textContent = "âœ… Valider et voir le rÃ©sultat";
        } else {
            btn.textContent = "âœ… Valider et continuer";
        }
    }

    function submitCurrentAnswer() {
        const selected = document.querySelector('input[name="answer"]:checked');
        if (!selected) {
            alert("Merci de sÃ©lectionner une rÃ©ponse (Conforme / Non conforme) avant de continuer.");
            return;
        }

        const userVal = (selected.value === "true");
        const q = currentQuestions[currentIndex];
        const isCorrect = (userVal === q.isCompliant);

        answers.push({
            question: q,
            userAnswer: userVal,
            isCorrect: isCorrect
        });

        currentIndex++;

        if (currentIndex < currentQuestions.length) {
            showCurrentQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        const questionZone = document.getElementById("question-zone");
        const resultZone = document.getElementById("quiz-result");
        const resultDetails = document.getElementById("quiz-result-details");
        const retryBar = document.getElementById("retry-bar");
        const navButtons = document.getElementById("nav-buttons");

        questionZone.innerHTML = "";
        navButtons.style.display = "none";

        const total = answers.length;
        let correctCount = 0;
        answers.forEach(a => { if (a.isCorrect) correctCount++; });

        const percentage = Math.round((correctCount * 100) / total);

        resultZone.style.display = "block";
        resultZone.innerHTML = `
            ðŸŽ¯ Votre rÃ©sultat : <span class="score-highlight">${percentage} %</span><br>
            Vous avez rÃ©pondu correctement Ã  ${correctCount} questions sur ${total}.
        `;

        let detailsHtml = "";
        answers.forEach((a, index) => {
            const goodAnswerText = a.question.isCompliant ? "Conforme" : "Non conforme";
            const userText = a.userAnswer ? "Conforme" : "Non conforme";
            const cardClass = a.isCorrect ? "detail-card correct" : "detail-card incorrect";

            detailsHtml += `
                <div class="${cardClass}">
                    <div class="detail-question">
                        Question ${index + 1} : ${a.question.text}
                    </div>
                    <div>
                        Votre rÃ©ponse : <strong>${userText}</strong> â€“
                        RÃ©ponse attendue : <strong>${goodAnswerText}</strong>
                    </div>
                    <div class="detail-explanation">
                        ${a.question.explanation}
                    </div>
                </div>
            `;
        });

        resultDetails.style.display = "block";
        resultDetails.innerHTML = detailsHtml;

        retryBar.style.display = "flex";
    }

    window.addEventListener("DOMContentLoaded", initQuiz);
</script>

</body>
</html>
